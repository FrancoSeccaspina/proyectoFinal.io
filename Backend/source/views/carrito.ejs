<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('./partials/head.ejs') %>
    <link rel="stylesheet" href="/css/carrito.css">
</head>

<body>

  <%- include('./partials/header.ejs') %>

    <main class="container-allMain-cart">

      <section id="header-cart">

        <h1>Carrito<p class="details-p">(x productos)</p>
        </h1><!--HACER LOGICA EN CSS PARA QUE SE AUTOINCREMENTE Y DOGA CANT EXACTA DE PRODUCTOS-->
        <div id="warning-sentence">
          <img src="/images/exclamation.png" alt="">
          <p>Agregar productos al carrito no garantiza su reserva. La compra se completa únicamente al
            finalizar el proceso de pago.</p>
        </div>
      </section>

      <section id="cards-products">
        <section id="products-description-cart">
          <div id="terms-products">
            <p>Estas comprando en <b>Activa fitness</b></p>
            <p>Al hacer compras en nuestra pagina aceltas los <a href="/terminos">terminos y condiciones</a>
            </p>
          </div>
          <div class="carrito-container">
            <h2>Mi Carrito</h2>

            <!-- Productos -->
            <ul class="lista-productos">
              <% productosCarrito.forEach(function(producto) { %>
                <div class="cart-container">
                  <div class="cart-wrapper">

                    <li class="producto">
                      <div class="cart-list">
                        <ul class="cart-items">
                          <li class="cart-item">
                            <img src="/images/<%= producto.imagen %>" alt="<%= producto.nombre %>" class="cart-image" />

                            <div class="cart-details">
                              <h3 class="cart-product-name">
                                <%= producto.nombre %>
                              </h3>
                              <dl class="cart-attributes">
                                <div>
                                  <dt>Descripcion : </dt>
                                  <dd>
                                    <%= producto.descripcion %>
                                  </dd>
                                </div>
                                <div>
                                  <dt>Precio : </dt>
                                  <dd>
                                    <%= producto.precio %>
                                  </dd>
                                </div>

                                <div>
                                  <dt>Cantidad : </dt>
                                  <dd>
                                    <%= producto.cantidad %>
                                  </dd>
                                </div>
                              </dl>
                            </div>

                            <div>
                              $<%= producto.subtotal %>
                            </div>

                            <div class="cart-actions">
                              <form action="/carrito/eliminar/<%= producto.id %>?_method=DELETE" method="POST">

                                <button type="submit" class="cart-remove-button eliminar-btn"
                                  data-id="<%= producto.id %>">
                                  <span class="visually-hidden">Eliminar producto</span>
                                  <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="#000000"
                                    viewBox="0 0 256 256">
                                    <path
                                      d="M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm96,168H64V64H192ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z">
                                    </path>
                                  </svg>
                                </button>
                              </form>
                            </div>



                          </li>
                        </ul>
                      </div>
                    </li>
                    <% }) %>

                  </div>
                </div>

            </ul>

            <!-- Total -->
            <li class="total-carrito">
              <strong>Total: $ <%= total %></strong>
            </li>
          </div>

          </div>
        </section>
      </section>

      <section id="payments">
        <div class="pay-sentence">
          <p>Elegí tu método de pago</p>
        </div>
        <div class="methods-img">
          <a href="/transferencia"><button id="transferencia-btn">Transferencia Bancaria</button></a>
          <a href="/mPago"><button id="mercadopago-btn">Mercado Pago</button></a>
        </div>
      </section>
      </section>
    </main>
    <script src="/js/carrito.js"></script>
</body>

</html>